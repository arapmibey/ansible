---
- name: Check available package updates on Linux systems
  hosts: all
  gather_facts: yes
  become: yes

  tasks:
    - name: Check for available updates (RHEL/CentOS)
      command: yum check-update
      register: update_output
      changed_when: false
      failed_when: update_output.rc not in [0, 100]
      when: ansible_facts['os_family'] == "RedHat"

    - name: Show available updates (RHEL/CentOS)
      ansible.builtin.debug:
        var: update_output.stdout_lines
      when: ansible_facts['os_family'] == "RedHat"
